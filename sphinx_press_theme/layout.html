<!DOCTYPE html>
<html {% if language is not none %} lang="{{ language }}"{% endif %}>
  <head>
    <meta charset="{{ encoding }}">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    {{- metatags }}
    {%- block htmltitle %}
      <title>{{ title|striptags|e }}{{ titlesuffix }}</title>
    {%- endblock %}
    {# <meta name="description" content="{{ description }}"> #}
    {%- block css %}
      <link rel="stylesheet" href="{{ pathto('_static/theme.css', 1)}}">
    {%- endblock %}

    {%- block scripts %}
      {# FIXME: use link-preload #}
      <script src="{{ pathto('_static/theme-vendors.js', 1)}}"></script>
      <script src="{{ pathto('_static/theme.js', 1)}}" defer></script>
    {%- endblock %}
    {%- if pageurl %}
      <link rel="canonical" href="{{ pageurl }}" />
    {%- endif %}
    {# TODO: opensearch #}
    {%- if favicon %}
      <link rel="shortcut icon" href="{{ pathto('_static/' + favicon, 1) }}"/>
    {%- endif %}

    {%- block linktags %}{%- include "linktags.html" %}{%- endblock %}
    {%- block extrahead %} {% endblock %}
  </head>

  <body><div id="app" class="theme-container" :class="pageClasses">
    {%- block header %}{%- include "navbar.html" %}{% endblock %}

    {# close sidebar when clicked out of it #}
    <div class="sidebar-mask"
         @click="toggleSidebar(false)"
         >
    </div>

    <sidebar @toggle-sidebar="toggleSidebar">
      {%- include "navlinks.html" %}
    </sidebar>


    {%- block content %}
      <div class="document">
        {%- block document %}
        <div class="documentwrapper">
          {%- if render_sidebar %}
            <div class="bodywrapper">
          {%- endif %}
          <div class="body" role="main">
            {% block body %} {% endblock %}
          </div>
          {%- if render_sidebar %}
            </div>
          {%- endif %}
        </div>
      {%- endblock %}
    </div>
  {%- endblock %}

  {%- block footer %}{%- include "footer.html" %}{%- endblock %}
  </div></body>
</html>

